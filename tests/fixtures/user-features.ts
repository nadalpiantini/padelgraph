// Test fixtures for UserFeatures (recommendations)
import type { UserFeatures, CollaborativeFilteringConfig } from '@/lib/recommendations/types';
import { DEFAULT_CF_CONFIG } from '@/lib/recommendations/types';

// Mock users with complete UserFeatures
export const mockUserFeatures: Record<string, UserFeatures> = {
  user1: {
    user_id: 'test-user-1',
    level: 'intermediate',
    skill_rating: 500,
    matches_played: 50,
    tournaments_participated: 5,
    city: 'Madrid',
    location: { lat: 40.4168, lng: -3.7038 },
    play_style: {
      aggressive: 0.6,
      defensive: 0.4,
      consistent: 0.7,
      strategic: 0.5,
    },
    preferred_format: 'doubles',
    preferred_time_slot: 'evening',
    availability_days: ['monday', 'wednesday', 'friday'],
    connection_count: 15,
    club_memberships: ['club-1', 'club-2'],
    frequent_partners: ['test-user-2', 'test-user-5'],
    last_active: new Date('2025-10-15'),
    activity_level: 0.7,
  },
  user2: {
    user_id: 'test-user-2',
    level: 'intermediate',
    skill_rating: 520,
    matches_played: 45,
    tournaments_participated: 4,
    city: 'Madrid',
    location: { lat: 40.4168, lng: -3.7038 },
    play_style: {
      aggressive: 0.5,
      defensive: 0.5,
      consistent: 0.8,
      strategic: 0.6,
    },
    preferred_format: 'doubles',
    preferred_time_slot: 'evening',
    availability_days: ['monday', 'wednesday', 'saturday'],
    connection_count: 12,
    club_memberships: ['club-1'],
    frequent_partners: ['test-user-1', 'test-user-3'],
    last_active: new Date('2025-10-16'),
    activity_level: 0.6,
  },
  user3: {
    user_id: 'test-user-3',
    level: 'advanced',
    skill_rating: 750,
    matches_played: 120,
    tournaments_participated: 15,
    city: 'Barcelona',
    location: { lat: 41.3851, lng: 2.1734 },
    play_style: {
      aggressive: 0.8,
      defensive: 0.3,
      consistent: 0.6,
      strategic: 0.7,
    },
    preferred_format: 'singles',
    preferred_time_slot: 'morning',
    availability_days: ['tuesday', 'thursday', 'saturday'],
    connection_count: 25,
    club_memberships: ['club-3'],
    frequent_partners: ['test-user-4'],
    last_active: new Date('2025-10-17'),
    activity_level: 0.9,
  },
  user4: {
    user_id: 'test-user-4',
    level: 'beginner',
    skill_rating: 200,
    matches_played: 10,
    tournaments_participated: 0,
    city: 'Valencia',
    location: { lat: 39.4699, lng: -0.3763 },
    play_style: {
      aggressive: 0.3,
      defensive: 0.7,
      consistent: 0.5,
      strategic: 0.4,
    },
    preferred_format: 'doubles',
    preferred_time_slot: 'afternoon',
    availability_days: ['monday', 'friday'],
    connection_count: 5,
    club_memberships: ['club-4'],
    frequent_partners: [],
    last_active: new Date('2025-10-10'),
    activity_level: 0.3,
  },
  // User without location
  user5: {
    user_id: 'test-user-5',
    level: 'intermediate',
    skill_rating: 480,
    matches_played: 35,
    tournaments_participated: 3,
    city: 'Sevilla',
    play_style: {
      aggressive: 0.4,
      defensive: 0.6,
      consistent: 0.7,
      strategic: 0.5,
    },
    preferred_format: 'doubles',
    preferred_time_slot: 'evening',
    availability_days: ['wednesday', 'friday'],
    connection_count: 8,
    club_memberships: ['club-2'],
    frequent_partners: ['test-user-1'],
    last_active: new Date('2025-10-14'),
    activity_level: 0.5,
  },
  // User without play style
  user6: {
    user_id: 'test-user-6',
    level: 'professional',
    skill_rating: 950,
    matches_played: 200,
    tournaments_participated: 30,
    city: 'Madrid',
    location: { lat: 40.4168, lng: -3.7038 },
    connection_count: 50,
    club_memberships: ['club-1', 'club-5'],
    frequent_partners: ['test-user-7'],
    last_active: new Date('2025-10-17'),
    activity_level: 1.0,
  },
};

// Test configuration
export const testConfig: CollaborativeFilteringConfig = {
  ...DEFAULT_CF_CONFIG,
  similarity_threshold: 0.3,
  max_similar_users: 10,
};
